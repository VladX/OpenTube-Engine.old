include (CheckFunctionExists.cmake)
include (CheckIncludeFile.cmake)

macro (required_lib variable fileinclude libname)
 check_include_file (${fileinclude} ${variable})
 if (NOT ${variable})
  message (FATAL_ERROR "Required library ${libname} not found.")
 endif (NOT ${variable})
endmacro (required_lib)

check_function_exists (accept4 CheckFunctionExists.c HAVE_ACCEPT4)
check_function_exists (epoll_create CheckFunctionExists.c HAVE_EPOLL)
check_function_exists (select select.c HAVE_SELECT)
if (NOT HAVE_EPOLL AND NOT HAVE_SELECT)
 message (FATAL_ERROR "Events is not supported by your system.")
endif (NOT HAVE_EPOLL AND NOT HAVE_SELECT)
required_lib (HAVE_ZLIB_H zlib.h zlib)
required_lib (HAVE_PCRE_H pcre.h PCRE)
